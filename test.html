<!DOCTYPE html>
<html>
  <head>
    <title>Test Page for Floating TradingView</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 50px;
        background: #f5f5f5;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #333;
      }
      .instruction-box {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }
      .debug-info {
        background: #f5f5f5;
        padding: 15px;
        border-radius: 5px;
        font-family: monospace;
        margin: 20px 0;
      }
      .shortcut {
        background: #333;
        color: white;
        padding: 5px 10px;
        border-radius: 3px;
        font-family: monospace;
      }
      button {
        background: #2196f3;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
      }
      button:hover {
        background: #1976d2;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Floating TradingView Test Page</h1>

      <div class="instruction-box">
        <h2>Instructions:</h2>
        <ol>
          <li>Make sure the extension is installed and enabled</li>
          <li>
            Click the extension icon in the toolbar OR press
            <span class="shortcut">Ctrl+Shift+F</span>
          </li>
          <li>The floating TradingView widget should appear</li>
          <li>If it doesn't work, check the console for errors (F12)</li>
        </ol>
      </div>

      <h2>Debug Tools:</h2>
      <button onclick="checkExtension()">Check Extension Status</button>
      <button onclick="openConsole()">Open Console (F12)</button>
      <button onclick="manualToggle()">Manual Toggle Widget</button>

      <div class="debug-info" id="debugInfo">
        Debug information will appear here...
      </div>

      <h2>Sample Content</h2>
      <p>
        This is a test page to verify that the Floating TradingView extension is
        working correctly. The widget should float above this content when
        activated.
      </p>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
        veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
        commodo consequat.
      </p>

      <p>The floating widget should be:</p>
      <ul>
        <li>Draggable (drag the header)</li>
        <li>Resizable (drag the bottom-right corner)</li>
        <li>Minimizable (click the - button)</li>
        <li>Closeable (click the × button)</li>
      </ul>
    </div>

    <script>
      function updateDebugInfo(message) {
        document.getElementById("debugInfo").innerHTML += message + "<br>";
      }

      function checkExtension() {
        updateDebugInfo("Checking extension...");

        // Check if content script is loaded
        if (window.floatingTV) {
          updateDebugInfo("✅ Content script is loaded");
          updateDebugInfo("Widget visible: " + window.floatingTV.isVisible);
        } else {
          updateDebugInfo("❌ Content script not found");
          updateDebugInfo("Try refreshing the page or reloading the extension");
        }

        // Check for container
        const container = document.getElementById(
          "floating-tradingview-container"
        );
        if (container) {
          updateDebugInfo("✅ Widget container exists");
          updateDebugInfo("Display: " + container.style.display);
        } else {
          updateDebugInfo("❌ Widget container not found");
        }
      }

      function openConsole() {
        updateDebugInfo(
          "Press F12 to open developer console and check for errors"
        );
      }

      function manualToggle() {
        if (window.floatingTV) {
          window.floatingTV.toggleVisibility();
          updateDebugInfo("Toggled widget visibility");
        } else {
          updateDebugInfo("❌ Cannot toggle - content script not loaded");
        }
      }

      // Auto-check on load
      window.addEventListener("load", () => {
        setTimeout(() => {
          updateDebugInfo("Page loaded. Checking extension status...");
          checkExtension();
        }, 1000);
      });
    </script>
  </body>
</html>
